(()=>{function e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}$(document).ready((function(){var e="";e+='<section id="user">',e+='<div class="card w-full bg-base-100 drop-shadow-md  bg-white">',e+='<div class="card-body">',e+='<h2 class="text-slate-900 text-xl font-semibold">เพิ่มผู้ใช้งาน</h2>',e+='<div class="form-control w-full">',e+='<label class="label">',e+='<span class="label-text text-slate-900 text-lg font-medium">รหัสพนักงาน SAPID <b class="text-rose-600">*</b></span>',e+="</label>",e+='<input type="text" placeholder="99999999" pattern="[0-9]+" minlength="8" maxlength="8" name="sapid[]" id="sapid--index--" required class="input input-bordered w-full bg-white border-slate-400 text-lg font-medium" data-user-index="--index--" />',e+='<input id="username--index--" type="text" placeholder="ชื่อผู้ใช้งาน" class="mt-3 input w-full max-w-lg text-base disabled:border-none disabled:bg-white disabled:text-slate-900" disabled />',e+="</div>",e+='<div class="form-control w-full mr-4">',e+='<label class="label">',e+='<span class="label-text text-slate-900 text-lg font-medium">สิทธิ์ผู้ใช้งาน <b class="text-rose-600">*</b></span>',e+="</label>",e+='<select disabled required name="permission[]" id="permission--index--" class="select select-bordered disabled:bg-slate-200 bg-white border-slate-400 text-lg font-normal w-full">',e+='<option value="" selected>---- เลือกสิทธิ์ผู้ใช้งาน ----</option>',e+='<option value="1" {{ (old("permission") == "1" ? "selected": "") }}>ผู้ดูแลระบบ</option>',e+='<option value="0" {{ (old("permission") == "0" ? "selected": "") }}>ผู้ใช้งานทั่วไป</option>',e+="</select>",e+="</div>",e+='<div class="card-actions mt-5 justify-end">',e+='<button id="remove" type="button" class="btn bg-red-500 border-none hover:bg-red-700">ลบช่องกรอกข้อมูล</button>',e+="</div>",e+="</div>",e+="</div>",e+="</section>";var s={sapid:null,username:null,permission:null,error:!1},r=[];function a(){var e=$(this)[0].id.slice(5);""===$(this).val()?($("#username".concat(e)).val(""),$("#permission0").val(""),$("#office_name0").val(""),$("#permission0").prop("disabled",!0),$("#office_name0").prop("disabled",!0),r[e].error=!1,r.reduce((function(e,t){return e||t.error}),!1)?$("#errors").removeClass("hidden"):$("#errors").addClass("hidden")):function(e){var t=$("#sapid"+e).val();$.ajax({url:sapidroute,type:"post",data:{sapid:t,_token:CSRF_TOKEN},success:function(t){$("#username"+e).val(t.AccountName),"Active"==t.Status?"Yes"==t.Exist?($("#username"+e).removeClass("disabled:text-teal-500"),$("#username"+e).addClass("disabled:text-red-500"),$("#permission"+e).prop("disabled",!0),$("#office_name"+e).prop("disabled",!0),$("#saveButton").prop("disabled",!0),r[e].error=!0):($("#username"+e).removeClass("disabled:text-red-500"),$("#username"+e).addClass("disabled:text-teal-500"),$("#permission"+e).prop("disabled",!1),$("#office_name"+e).prop("disabled",!1),$("#saveButton").prop("disabled",!1),r[e].error=!1):(t.Status,$("#username"+e).removeClass("disabled:text-teal-500"),$("#username"+e).addClass("disabled:text-red-500"),$("#permission"+e).prop("disabled",!0),$("#office_name"+e).prop("disabled",!0),$("#saveButton").prop("disabled",!0),r[e].error=!0),r.reduce((function(e,t){return e||t.error}),!1)?$("#errors").removeClass("hidden"):$("#errors").addClass("hidden")}})}($(this).data("user-index"))}r.push(t({},s)),$("#sapid0").change(a),$("#plus_icon").click((function(){r.push(t({},s));var l=r.length-1,i=e.replaceAll("--index--",l);$("#newuser").append(i),$("#sapid"+l).change(a),$("#remove").prop("disabled",!1)})),$(document).on("click","#remove",(function(){--r.length,$(this).closest("#user").remove(),1==r.length&&$("#remove").prop("disabled",!0)}))}))})();